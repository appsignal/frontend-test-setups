!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";r.d(e,"a",(function(){return U})),r.d(e,"b",(function(){return Z}));class n{constructor(t,e,r){this.eventTarget=t,this.eventName=e,this.eventOptions=r,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){const e=function(t){if("immediatePropagationStopped"in t)return t;{const{stopImmediatePropagation:e}=t;return Object.assign(t,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}(t);for(const t of this.bindings){if(e.immediatePropagationStopped)break;t.handleEvent(e)}}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{const r=t.index,n=e.index;return r<n?-1:r>n?1:0})}}class s{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t){this.fetchEventListenerForBinding(t).bindingDisconnected(t)}handleError(t,e,r={}){this.application.handleError(t,"Error "+e,r)}fetchEventListenerForBinding(t){const{eventTarget:e,eventName:r,eventOptions:n}=t;return this.fetchEventListener(e,r,n)}fetchEventListener(t,e,r){const n=this.fetchEventListenerMapForEventTarget(t),s=this.cacheKey(e,r);let i=n.get(s);return i||(i=this.createEventListener(t,e,r),n.set(s,i)),i}createEventListener(t,e,r){const s=new n(t,e,r);return this.started&&s.connect(),s}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){const r=[t];return Object.keys(e).sort().forEach(t=>{r.push(`${e[t]?"":"!"}${t}`)}),r.join(":")}}const i=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;function o(t){return"window"==t?window:"document"==t?document:void 0}function a(t){return t.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function u(t){return t.replace(/([A-Z])/g,(t,e)=>"-"+e.toLowerCase())}const h={a:t=>"click",button:t=>"click",form:t=>"submit",details:t=>"toggle",input:t=>"submit"==t.getAttribute("type")?"click":"input",select:t=>"change",textarea:t=>"input"};function l(t){throw new Error(t)}function d(t){try{return JSON.parse(t)}catch(e){return t}}class f{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){this.willBeInvokedByEvent(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const t=this.controller[this.methodName];if("function"==typeof t)return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}invokeWithEvent(t){const{target:e,currentTarget:r}=t;try{const{params:n}=this.action,s=Object.assign(t,{params:n});this.method.call(this.controller,s),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:r,action:this.methodName})}catch(e){const{identifier:r,controller:n,element:s,index:i}=this,o={identifier:r,controller:n,element:s,index:i,event:t};this.context.handleError(e,`invoking action "${this.action}"`,o)}}willBeInvokedByEvent(t){const e=t.target;return this.element===e||(e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class p{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(t=>this.processMutations(t))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const t=new Set(this.matchElementsInTree());for(const e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(const e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){"attributes"==t.type?this.processAttributeChange(t.target,t.attributeName):"childList"==t.type&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){const r=t;this.elements.has(r)?this.delegate.elementAttributeChanged&&this.matchElement(r)?this.delegate.elementAttributeChanged(r,e):this.removeElement(r):this.matchElement(r)&&this.addElement(r)}processRemovedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.processTree(t,this.removeElement)}}processAddedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.elementIsActive(t)&&this.processTree(t,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(const r of this.matchElementsInTree(t))e.call(this,r)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected==this.element.isConnected&&this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}}class m{constructor(t,e,r){this.attributeName=e,this.delegate=r,this.elementObserver=new p(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){const e=this.matchElement(t)?[t]:[],r=Array.from(t.querySelectorAll(this.selector));return e.concat(r)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}}class g{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(t=>this.processMutations(t))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){const e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){const r=this.delegate.getStringMapKeyForAttribute(t);if(null!=r){this.stringMap.has(t)||this.stringMapKeyAdded(r,t);const n=this.element.getAttribute(t);if(this.stringMap.get(t)!=n&&this.stringMapValueChanged(n,r,e),null==n){const e=this.stringMap.get(t);this.stringMap.delete(t),e&&this.stringMapKeyRemoved(r,t,e)}else this.stringMap.set(t,n)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,r)}stringMapKeyRemoved(t,e,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,r)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}function v(t,e,r){b(t,e).add(r)}function y(t,e,r){b(t,e).delete(r),function(t,e){const r=t.get(e);null!=r&&0==r.size&&t.delete(e)}(t,e)}function b(t,e){let r=t.get(e);return r||(r=new Set,t.set(e,r)),r}class w{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,e)=>t.concat(Array.from(e)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,e)=>t+e.size,0)}add(t,e){v(this.valuesByKey,t,e)}delete(t,e){y(this.valuesByKey,t,e)}has(t,e){const r=this.valuesByKey.get(t);return null!=r&&r.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(e=>e.has(t))}getValuesForKey(t){const e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,r])=>r.has(t)).map(([t,e])=>t)}}class A{constructor(t,e,r){this.attributeObserver=new m(t,e,this),this.delegate=r,this.tokensByElement=new w}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){const[e,r]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(r)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(t=>this.tokenMatched(t))}tokensUnmatched(t){t.forEach(t=>this.tokenUnmatched(t))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){const e=this.tokensByElement.getValuesForKey(t),r=this.readTokensForElement(t),n=function(t,e){const r=Math.max(t.length,e.length);return Array.from({length:r},(r,n)=>[t[n],e[n]])}(e,r).findIndex(([t,e])=>{return n=e,!((r=t)&&n&&r.index==n.index&&r.content==n.content);var r,n});return-1==n?[[],[]]:[e.slice(n),r.slice(n)]}readTokensForElement(t){const e=this.attributeName;return function(t,e,r){return t.trim().split(/\s+/).filter(t=>t.length).map((t,n)=>({element:e,attributeName:r,content:t,index:n}))}(t.getAttribute(e)||"",t,e)}}class E{constructor(t,e,r){this.tokenListObserver=new A(t,e,this),this.delegate=r,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){const{element:e}=t,{value:r}=this.fetchParseResultForToken(t);r&&(this.fetchValuesByTokenForElement(e).set(t,r),this.delegate.elementMatchedValue(e,r))}tokenUnmatched(t){const{element:e}=t,{value:r}=this.fetchParseResultForToken(t);r&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,r))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(t){return{error:t}}}}class O{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new E(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){const e=new f(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){const e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t)),this.bindingsByAction.clear()}parseValueForToken(t){const e=class{constructor(t,e,r){this.element=t,this.index=e,this.eventTarget=r.eventTarget||t,this.eventName=r.eventName||function(t){const e=t.tagName.toLowerCase();if(e in h)return h[e](t)}(t)||l("missing event name"),this.eventOptions=r.eventOptions||{},this.identifier=r.identifier||l("missing identifier"),this.methodName=r.methodName||l("missing method name")}static forToken(t){return new this(t.element,t.index,function(t){const e=t.trim().match(i)||[];return{eventTarget:o(e[4]),eventName:e[2],eventOptions:e[9]?(r=e[9],r.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})):{},identifier:e[5],methodName:e[7]};var r}(t.content))}toString(){const t=this.eventTargetName?"@"+this.eventTargetName:"";return`${this.eventName}${t}->${this.identifier}#${this.methodName}`}get params(){return this.eventTarget instanceof Element?this.getParamsFromEventTargetAttributes(this.eventTarget):{}}getParamsFromEventTargetAttributes(t){const e={},r=new RegExp(`^data-${this.identifier}-(.+)-param$`);return Array.from(t.attributes).forEach(({name:t,value:n})=>{const s=t.match(r),i=s&&s[1];i&&Object.assign(e,{[a(i)]:d(n)})}),e}get eventTargetName(){return(t=this.eventTarget)==window?"window":t==document?"document":void 0;var t}}.forToken(t);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}}class k{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new g(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap,this.invokeChangedCallbacksForDefaultValues()}start(){this.stringMapObserver.start()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){const r=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,r.writer(this.receiver[t]),r.writer(r.defaultValue))}stringMapValueChanged(t,e,r){const n=this.valueDescriptorNameMap[e];null!==t&&(null===r&&(r=n.writer(n.defaultValue)),this.invokeChangedCallback(e,t,r))}stringMapKeyRemoved(t,e,r){const n=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,n.writer(this.receiver[t]),r):this.invokeChangedCallback(t,n.writer(n.defaultValue),r)}invokeChangedCallbacksForDefaultValues(){for(const{key:t,name:e,defaultValue:r,writer:n}of this.valueDescriptors)null==r||this.controller.data.has(t)||this.invokeChangedCallback(e,n(r),void 0)}invokeChangedCallback(t,e,r){const n=t+"Changed",s=this.receiver[n];if("function"==typeof s){const n=this.valueDescriptorNameMap[t],i=n.reader(e);let o=r;r&&(o=n.reader(r)),s.call(this.receiver,i,o)}}get valueDescriptors(){const{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){const t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{const r=this.valueDescriptorMap[e];t[r.name]=r}),t}hasValue(t){const e="has"+c(this.valueDescriptorNameMap[t].name);return this.receiver[e]}}class T{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new w}start(){this.tokenListObserver||(this.tokenListObserver=new A(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var r;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),null===(r=this.tokenListObserver)||void 0===r||r.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var r;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),null===(r=this.tokenListObserver)||void 0===r||r.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(const t of this.targetsByName.keys)for(const e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}class N{constructor(t,e){this.logDebugActivity=(t,e={})=>{const{identifier:r,controller:n,element:s}=this;e=Object.assign({identifier:r,controller:n,element:s},e),this.application.logDebugActivity(this.identifier,t,e)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new O(this,this.dispatcher),this.valueObserver=new k(this,this.controller),this.targetObserver=new T(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(t){this.handleError(t,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,r={}){const{identifier:n,controller:s,element:i}=this;r=Object.assign({identifier:n,controller:s,element:i},r),this.application.handleError(t,"Error "+e,r)}targetConnected(t,e){this.invokeControllerMethod(e+"TargetConnected",t)}targetDisconnected(t,e){this.invokeControllerMethod(e+"TargetDisconnected",t)}invokeControllerMethod(t,...e){const r=this.controller;"function"==typeof r[t]&&r[t](...e)}}function M(t,e){const r=_(t);return Array.from(r.reduce((t,r)=>(function(t,e){const r=t[e];return Array.isArray(r)?r:[]}(r,e).forEach(e=>t.add(e)),t),new Set))}function S(t,e){return _(t).reduce((t,r)=>(t.push(...function(t,e){const r=t[e];return r?Object.keys(r).map(t=>[t,r[t]]):[]}(r,e)),t),[])}function _(t){const e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}function C(t){return function(t,e){const r=B(t),n=function(t,e){return x(e).reduce((r,n)=>{const s=function(t,e,r){const n=Object.getOwnPropertyDescriptor(t,r);if(!n||!("value"in n)){const t=Object.getOwnPropertyDescriptor(e,r).value;return n&&(t.get=n.get||t.get,t.set=n.set||t.set),t}}(t,e,n);return s&&Object.assign(r,{[n]:s}),r},{})}(t.prototype,e);return Object.defineProperties(r.prototype,n),r}(t,function(t){return M(t,"blessings").reduce((e,r)=>{const n=r(t);for(const t in n){const r=e[t]||{};e[t]=Object.assign(r,n[t])}return e},{})}(t))}const x="function"==typeof Object.getOwnPropertySymbols?t=>[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)]:Object.getOwnPropertyNames,B=(()=>{function t(t){function e(){return Reflect.construct(t,arguments,new.target)}return e.prototype=Object.create(t.prototype,{constructor:{value:e}}),Reflect.setPrototypeOf(e,t),e}try{return function(){const e=t((function(){this.a.call(this)}));e.prototype.a=function(){},new e}(),t}catch(t){return t=>class extends t{}}})();class L{constructor(t,e){this.application=t,this.definition=function(t){return{identifier:t.identifier,controllerConstructor:C(t.controllerConstructor)}}(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){const e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){const e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new N(this,t),this.contextsByScope.set(t,e)),e}}class P{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){const e=this.data.get(this.getDataKey(t))||"";return e.match(/[^\s]+/g)||[]}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return t+"-class"}get data(){return this.scope.data}}class j{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){const e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){const r=this.getAttributeNameForKey(t);return this.element.setAttribute(r,e),this.get(t)}has(t){const e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){const e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${u(t)}`}}class F{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,r){let n=this.warnedKeysByObject.get(t);n||(n=new Set,this.warnedKeysByObject.set(t,n)),n.has(e)||(n.add(e),this.logger.warn(r,t))}}function D(t,e){return`[${t}~="${e}"]`}class I{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return null!=this.find(t)}find(...t){return t.reduce((t,e)=>t||this.findTarget(e)||this.findLegacyTarget(e),void 0)}findAll(...t){return t.reduce((t,e)=>[...t,...this.findAllTargets(e),...this.findAllLegacyTargets(e)],[])}findTarget(t){const e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){const e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){return D(this.schema.targetAttributeForScope(this.identifier),t)}findLegacyTarget(t){const e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){const e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(e=>this.deprecate(e,t))}getLegacySelectorForTargetName(t){const e=`${this.identifier}.${t}`;return D(this.schema.targetAttribute,e)}deprecate(t,e){if(t){const{identifier:r}=this,n=this.schema.targetAttribute,s=this.schema.targetAttributeForScope(r);this.guide.warn(t,"target:"+e,`Please replace ${n}="${r}.${e}" with ${s}="${e}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}}class K{constructor(t,e,r,n){this.targets=new I(this),this.classes=new P(this),this.data=new j(this),this.containsElement=t=>t.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=r,this.guide=new F(n)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return D(this.schema.controllerAttribute,this.identifier)}}class V{constructor(t,e,r){this.element=t,this.schema=e,this.delegate=r,this.valueListObserver=new E(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){const{element:e,content:r}=t,n=this.fetchScopesByIdentifierForElement(e);let s=n.get(r);return s||(s=this.delegate.createScopeForElementAndIdentifier(e,r),n.set(r,s)),s}elementMatchedValue(t,e){const r=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,r),1==r&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){const r=this.scopeReferenceCounts.get(e);r&&(this.scopeReferenceCounts.set(e,r-1),1==r&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}}class R{constructor(t){this.application=t,this.scopeObserver=new V(this.element,this.schema,this),this.scopesByIdentifier=new w,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);const e=new L(this.application,t);this.connectModule(e)}unloadIdentifier(t){const e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){const r=this.modulesByIdentifier.get(e);if(r)return r.contexts.find(e=>e.element==t)}handleError(t,e,r){this.application.handleError(t,e,r)}createScopeForElementAndIdentifier(t,e){return new K(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t);this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(e=>t.connectContextForScope(e))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier);this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(e=>t.disconnectContextForScope(e))}}const $={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:t=>`data-${t}-target`};class U{constructor(t=document.documentElement,e=$){this.logger=console,this.debug=!1,this.logDebugActivity=(t,e,r={})=>{this.debug&&this.logFormattedMessage(t,e,r)},this.element=t,this.schema=e,this.dispatcher=new s(this),this.router=new R(this)}static start(t,e){const r=new U(t,e);return r.start(),r}async start(){await new Promise(t=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",()=>t()):t()}),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){e.shouldLoad&&this.load({identifier:t,controllerConstructor:e})}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(t=>this.router.loadDefinition(t))}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(t=>this.router.unloadIdentifier(t))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){const r=this.router.getContextForElementAndIdentifier(t,e);return r?r.controller:null}handleError(t,e,r){var n;this.logger.error("%s\n\n%o\n\n%o",e,t,r),null===(n=window.onerror)||void 0===n||n.call(window,e,"",0,0,t)}logFormattedMessage(t,e,r={}){r=Object.assign({application:this},r),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}}function q([t,e]){return function(t,e){const r=u(t)+"-value",n=function(t){const e=function(t){const e=z(t.type);if(e){const r=G(t.default);if(e!==r)throw new Error(`Type "${e}" must match the type of the default value. Given default value: "${t.default}" as "${r}"`);return e}}(t),r=G(t),n=z(t),s=e||r||n;if(s)return s;throw new Error(`Unknown value type "${t}"`)}(e);return{type:n,key:r,name:a(r),get defaultValue(){return function(t){const e=z(t);if(e)return H[e];const r=t.default;return void 0!==r?r:t}(e)},get hasCustomDefaultValue(){return void 0!==G(e)},reader:J[n],writer:X[n]||X.default}}(t,e)}function z(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function G(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(t)?"array":"[object Object]"===Object.prototype.toString.call(t)?"object":void 0}const H={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},J={array(t){const e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError("Expected array");return e},boolean:t=>!("0"==t||"false"==t),number:t=>Number(t),object(t){const e=JSON.parse(t);if(null===e||"object"!=typeof e||Array.isArray(e))throw new TypeError("Expected object");return e},string:t=>t},X={default:function(t){return""+t},array:W,object:W};function W(t){return JSON.stringify(t)}class Z{constructor(t){this.context=t}static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:r={},prefix:n=this.identifier,bubbles:s=!0,cancelable:i=!0}={}){const o=new CustomEvent(n?`${n}:${t}`:t,{detail:r,bubbles:s,cancelable:i});return e.dispatchEvent(o),o}}Z.blessings=[function(t){return M(t,"classes").reduce((t,e)=>{return Object.assign(t,{[(r=e)+"Class"]:{get(){const{classes:t}=this;if(t.has(r))return t.get(r);{const e=t.getAttributeName(r);throw new Error(`Missing attribute "${e}"`)}}},[r+"Classes"]:{get(){return this.classes.getAll(r)}},[`has${c(r)}Class`]:{get(){return this.classes.has(r)}}});var r},{})},function(t){return M(t,"targets").reduce((t,e)=>{return Object.assign(t,{[(r=e)+"Target"]:{get(){const t=this.targets.find(r);if(t)return t;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[r+"Targets"]:{get(){return this.targets.findAll(r)}},[`has${c(r)}Target`]:{get(){return this.targets.has(r)}}});var r},{})},function(t){const e=S(t,"values"),r={valueDescriptorMap:{get(){return e.reduce((t,e)=>{const r=q(e),n=this.data.getAttributeNameForKey(r.key);return Object.assign(t,{[n]:r})},{})}}};return e.reduce((t,e)=>Object.assign(t,function(t){const e=q(t),{key:r,name:n,reader:s,writer:i}=e;return{[n]:{get(){const t=this.data.get(r);return null!==t?s(t):e.defaultValue},set(t){void 0===t?this.data.delete(r):this.data.set(r,i(t))}},["has"+c(n)]:{get(){return this.data.has(r)||e.hasCustomDefaultValue}}}}(e)),r)}],Z.targets=[],Z.values={}},function(t,e,r){"use strict";(function(t,n){function s(){return"[object process]"===Object.prototype.toString.call(void 0!==t?t:0)}function i(){return s()?n:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return i}))}).call(this,r(5),r(6))},function(t,e,r){"use strict";r.r(e),e.default=function(t,e){return e=e||{},new Promise((function(r,n){var s=new XMLHttpRequest,i=[],o=[],a={},c=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return o},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var u in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,r){i.push(e=e.toLowerCase()),o.push([e,r]),a[e]=a[e]?a[e]+","+r:r})),r(c())},s.onerror=n,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(u,e.headers[u]);s.send(e.body||null)}))}},function(t,e,r){t.exports=self.fetch||(self.fetch=r(2).default||r(2))},function(t,e){},function(t,e){var r,n,s=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var c,u=[],h=!1,l=-1;function d(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!h){var t=a(d);h=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||h||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n={"./example_controller.js":8};function s(t){var e=i(t);return r(e)}function i(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id=7},function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=class extends n.b{initialize(){throw new Error("This is an error")}}},function(t,e,r){"use strict";r.r(e);var n=r(0);var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};var i=function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function o(t,e,r,n){return new(r||(r=Promise))((function(s,i){function o(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))}function a(t,e){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],n=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}Object.create;function c(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,s,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(t){s={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}Object.create;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?function(t){return t}:1===t.length?t[0]:t.reduce((function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t(e.apply(void 0,h(r)))}}))}function d(t){if(t)return Object.keys(t).forEach((function(e){"string"!=typeof t[e]&&"boolean"!=typeof t[e]&&"number"!=typeof t[e]&&(t[e]=JSON.stringify(t[e]))})),t}function f(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"]){var e=t.stacktrace;return(void 0===e?"":e).split("\n").filter((function(t){return""!==t}))}if(t.stack){var r=t.stack;return(void 0===r?"":r).split("\n").filter((function(t){return""!==t}))}return["No stacktrace available"]}var p=r(1);r(3);var m=function(){function t(t){this._data=t}return t.prototype.toJSON=function(){return JSON.stringify(this._data)},t.prototype.serialize=function(){return this._data},t}(),g=function(){function t(){}return t.serialize=function(){return{transport:this.transport(),origin:this.origin()}},t.origin=function(){var t=Object(p.a)();return!t.navigator||"ReactNative"===t.navigator.product&&!t.location?"":t.location.origin||t.location.protocol+"//"+t.location.hostname},t.transport=function(){var t=Object(p.a)();return Object(p.b)()&&"undefined"==typeof jest?"NodeHTTP":t.XDomainRequest?"XDomainRequest":t.XMLHttpRequest&&!t.fetch?"XMLHttpRequest":"fetch"},t.supportsPromises=function(){var t,e=Object(p.a)();return"Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&(new e.Promise((function(e){t=e})),"function"==typeof t)},t}(),v=function(){function t(t){this.url=t}return t.prototype.send=function(t){var e=this;return new Promise((function(r,n){var s,i=new XDomainRequest,o=new RegExp("^https?:");i.onload=function(){return r({})},i.open("POST",e.url.replace(o,null===(s=null===window||void 0===window?void 0:window.location)||void 0===s?void 0:s.protocol)),setTimeout((function(){try{i.send(t)}catch(t){n(t)}}),0)}))},t}(),y=function(){function t(t){this.url=t}return t.prototype.send=function(t){var e=this;return new Promise((function(r,n){try{var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&r({})},s.open("POST",e.url),s.send(t)}catch(t){n(t)}}))},t}(),b=function(){function t(t,e){this.url=t}return t.prototype.send=function(t){return o(this,void 0,void 0,(function(){var e,r;return a(this,(function(n){switch(n.label){case 0:return[4,fetch(this.url,{method:"POST",body:t})];case 1:return e=n.sent(),r=e.statusText,[2,e.ok?Promise.resolve({}):Promise.reject({statusText:r})]}}))}))},t}(),w=r(4),A=r.n(w),E=function(){function t(t){this.url=t}return t.prototype.send=function(t){var e=this,r={method:"POST",headers:{"Content-Type":"application/json","Content-Length":t.length}};return new Promise((function(n,s){var i=A.a.request(e.url,r,(function(){})).on("error",(function(t){return s(t)}));i.write(t),i.end(),n({})}))},t}(),O=function(){function t(t){this._uri=t.uri||"https://appsignal-endpoint.net/collect",this._apiKey=t.key,this._clientVersion=t.version,this._transport=this._createTransport(this._url())}return t.prototype.push=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this._transport.send(t.toJSON())];case 1:return e.sent(),[2,t]}}))}))},t.prototype._createTransport=function(t){switch(g.transport()){case"XDomainRequest":return new v(t);case"XMLHttpRequest":return new y(t);case"NodeHTTP":return new E(t);default:return new b(t)}},t.prototype._url=function(){var t,e=this._authorization();return this._uri+"?"+(t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"))},t.prototype._authorization=function(){return{api_key:this._apiKey,version:this._clientVersion}},t}(),k=function(t){function e(e){return t.call(this,i({timestamp:Math.round((new Date).getTime()/1e3),namespace:"frontend",error:{name:"NullError",message:"No error has been set",backtrace:[]}},e))||this}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.setAction=function(t){return t&&"string"==typeof t?(this._data.action=t,this):this},e.prototype.setNamespace=function(t){return t&&"string"==typeof t?(this._data.namespace=t,this):this},e.prototype.setError=function(t){return t&&function(t){return void 0!==t.message&&(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"]||void 0!==t.stack)}(t)?(this._data.error={name:t.name||"[unknown]",message:t.message,backtrace:f(t)},this):this},e.prototype.setTags=function(t){return this._data.tags=i(i({},this._data.tags),function(t){if(t)return Object.keys(t).forEach((function(e){"object"==typeof t[e]&&(t[e]=JSON.stringify(t[e])),t[e]=String(t[e])})),t}(t)),this},e.prototype.setParams=function(t){return this._data.params=i(i({},this._data.params),t),this},e.prototype.setBreadcrumbs=function(t){return this._data.breadcrumbs=t,this},e}(m),T=function(){function t(t){this._data=t||[]}return t.prototype.clear=function(){this._data=[]},t.prototype.values=function(){return this._data},t.prototype.push=function(t){var e;return Array.isArray(t)?(e=this._data).push.apply(e,h(t)):this._data.push(t)},t.prototype.drain=function(){return a(this,(function(t){switch(t.label){case 0:return this._data.length>0?[4,this._data.shift()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}}))},t}(),N=function(){function t(t,e,r){this._retries=0,this._timerID=0,this._duration=0,this._api=e,this._queue=t,this.options=i({limit:5,initialDuration:1e3},r),this.reset()}return t.prototype.schedule=function(t){var e=this;void 0===t&&(t=this._duration);var r=Object(p.a)();return r.setTimeout((function(){return o(e,void 0,void 0,(function(){var e,r,n,s,i,o,u;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,7,8,9]),e=c(this._queue.drain()),r=e.next(),a.label=1;case 1:if(r.done)return[3,6];if(!(n=r.value))return[2];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this._api.push(n)];case 3:return a.sent(),[3,5];case 4:return a.sent(),s=Math.floor(Math.pow(t,1.3)),this._retries=this._retries-1,0===this._retries?this.reset():(this._queue.push(n),this._timerID=this.schedule(s)),[2];case 5:return r=e.next(),[3,1];case 6:return[3,9];case 7:return i=a.sent(),o={error:i},[3,9];case 8:try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(o)throw o.error}return[7];case 9:return this.reset(),[2]}}))}))}),t)},t.prototype.reset=function(){var t=this.options,e=t.limit,r=t.initialDuration;this._retries=e,this._duration=r},t}(),M=new(function(){function t(t){this.VERSION="1.3.22",this.ignored=[],this._breadcrumbs=[],this._hooks={decorators:Array(),overrides:Array()},this._env=g.serialize(),this._queue=new T([]);var e=t.key,r=void 0===e?"":e,n=t.uri,s=t.revision,i=t.ignoreErrors;s&&"string"!=typeof s&&(t.revision=String(s)),""===r&&console.info("[APPSIGNAL]: Started in development mode."),this._api=new O({key:r,uri:n,version:this.VERSION}),i&&Array.isArray(i)&&(this.ignored=i),this._dispatcher=new N(this._queue,this._api),this._options=t}return t.prototype.send=function(t,e,r){var n=this;if(t instanceof Error||t instanceof k){if(0!==this.ignored.length){if(t instanceof Error&&this.ignored.some((function(e){return e.test(t.message)})))return void console.warn("[APPSIGNAL]: Ignored an error: "+t.message);if(t instanceof k){var s=t.serialize().error;if(s.message&&this.ignored.some((function(t){return t.test(s.message)})))return void console.warn("[APPSIGNAL]: Ignored a span: "+s.message)}}var i=t instanceof k?t:this._createSpanFromError(t);if(this._hooks.decorators.length>0&&l.apply(void 0,h(this._hooks.decorators))(i),e)if("function"==typeof e){e(i)}else{console.warn("[APPSIGNAL]: DEPRECATED: Calling the `send`/`sendError` function with a tags object is deprecated. Use the callback argument instead.");var o=d(e)||{};i.setTags(o)}if(r&&(console.warn("[APPSIGNAL]: DEPRECATED: Calling the `send`/`sendError` function with a namespace is deprecated. Use the callback argument instead."),i.setNamespace(r)),this._breadcrumbs.length>0&&i.setBreadcrumbs(this._breadcrumbs),this._hooks.overrides.length>0&&l.apply(void 0,h(this._hooks.overrides))(i),g.supportsPromises()){if(this._breadcrumbs=[],this._options.key)return this._api.push(i).catch((function(){n._queue.push(i),setTimeout((function(){return n._dispatcher.schedule()}),0)}));if(console.warn("[APPSIGNAL]: Span not sent because we're in development mode:",i),t instanceof Error)throw t}else console.error("[APPSIGNAL]: Error not sent. A Promise polyfill is required.")}else console.error("[APPSIGNAL]: Can't send error, given error is not a valid type")},t.prototype.sendError=function(t,e,r){return this.send(t,e,r)},t.prototype.use=function(t){t.call(this)},t.prototype.createSpan=function(t){var e=this._options,r=e.revision,n=void 0===r?"":r,s=e.namespace,i=new k({environment:this._env,revision:n});return s&&i.setNamespace(s),t&&"function"==typeof t&&t(i),i},t.prototype.wrap=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return a(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,4]),[4,t()];case 1:return[2,s.sent()];case 2:return n=s.sent(),[4,this.sendError(n,e,r)];case 3:return s.sent(),[2,Promise.reject(n)];case 4:return[2]}}))}))},t.prototype.addDecorator=function(t){this._hooks.decorators.push(t)},t.prototype.addOverride=function(t){this._hooks.overrides.push(t)},t.prototype.demo=function(){var t=this._createSpanFromError(new Error("Hello world! This is an error used for demonstration purposes."));t.setAction("TestAction").setParams({path:"/hello",method:"GET"}).setTags({demo_sample:"true"}),this.send(t)},t.prototype.addBreadcrumb=function(t){var e=i(i({timestamp:Math.round((new Date).getTime()/1e3)},t),{metadata:d(t.metadata)});e.category?e.action?(20===this._breadcrumbs.length&&this._breadcrumbs.pop(),this._breadcrumbs.unshift(e)):console.warn("[APPSIGNAL]: Breadcrumb not added. `action` is missing."):console.warn("[APPSIGNAL]: Breadcrumb not added. `category` is missing.")},t.prototype._createSpanFromError=function(t){var e=this.createSpan();return e.setError(t),e},t}())({key:"frontend-key",revision:"revision",uri:"http://localhost:4567/collect"});const S=n.a.start();!function(t,e){var r=e.handleError;e.handleError=function(e,n){var s=t.createSpan((function(t){return t.setTags({framework:"Stimulus",message:n}).setError(e)}));t.send(s),r&&"function"==typeof r&&r.apply(this,arguments)}}(M,S);const _=r(7);S.load(function(t){return t.keys().map(e=>function(t,e){const r=function(t){const e=(t.match(/^(?:\.\/)?(.+)(?:[_-]controller\..+?)$/)||[])[1];if(e)return e.replace(/_/g,"-").replace(/\//g,"--")}(e);if(r)return function(t,e){const r=t.default;if("function"==typeof r)return{identifier:e,controllerConstructor:r}}(t(e),r)}(t,e)).filter(t=>t)}(_))}]);
//# sourceMappingURL=bundle.js.map